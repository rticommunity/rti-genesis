<?xml version="1.0" encoding="UTF-8"?>
<dds xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
     xsi:noNamespaceSchemaLocation="http://community.rti.com/schema/7.3.0/rti_dds_qos_profiles.xsd"
     version="7.3.0">
  <type_library name="genesis_lib">

    <!-- agent registration  -->
    <struct name= "genesis_agent_registration_announce">
      <member name="message" type="string" stringMaxLength="2048" />
      <member name="prefered_name" type="string" stringMaxLength="256" />
      <member name="default_capable" type="int32"/>
      <member name="instance_id" type="string" key="true" stringMaxLength="128"/>
      <member name="service_name" type="string" stringMaxLength="256"/>
    </struct>

    <!-- Below are the two NLP communication types, interface to agent and agent to agent.  Right now they're at 8K, But it should probably be either Unbounded or... Better yet, Add Streaming like we had in version 0.1.-->
    <!-- interface to agent communication (RPC v2: unified topics with GUID-based content filtering) -->
    <struct name="InterfaceAgentRequest">
      <member name="message" type="string" stringMaxLength="8192"/>
      <member name="conversation_id" type="string" stringMaxLength="128"/>
      <!-- RPC v2: Empty for broadcast, set to specific GUID for targeted request -->
      <member name="target_service_guid" type="string" stringMaxLength="128"/>
      <!-- Optional service instance tag for migration scenarios (content filtering, not topic names) -->
      <member name="service_instance_tag" type="string" stringMaxLength="64"/>
    </struct>

    <struct name="InterfaceAgentReply">
      <member name="message" type="string" stringMaxLength="8192"/>
      <member name="status" type="int32"/>
      <member name="conversation_id" type="string" stringMaxLength="128"/>
      <!-- RPC v2: Replier's GUID for subsequent targeted requests -->
      <member name="replier_service_guid" type="string" stringMaxLength="128"/>
      <!-- Echo back the service instance tag if present -->
      <member name="service_instance_tag" type="string" stringMaxLength="64"/>
    </struct>

        <!-- Agent to agent communication (RPC v2: unified topics with GUID-based content filtering) -->
    <struct name="AgentAgentRequest">
      <member name="message" type="string" stringMaxLength="8192"/>
      <member name="conversation_id" type="string" stringMaxLength="128"/>
      <!-- RPC v2: Empty for broadcast, set to specific GUID for targeted request -->
      <member name="target_service_guid" type="string" stringMaxLength="128"/>
      <!-- Optional service instance tag for migration scenarios (content filtering, not topic names) -->
      <member name="service_instance_tag" type="string" stringMaxLength="64"/>
    </struct>

    <struct name="AgentAgentReply">
      <member name="message" type="string" stringMaxLength="8192"/>
      <member name="status" type="int32"/>
      <member name="conversation_id" type="string" stringMaxLength="128"/>
      <!-- RPC v2: Replier's GUID for subsequent targeted requests -->
      <member name="replier_service_guid" type="string" stringMaxLength="128"/>
      <!-- Echo back the service instance tag if present -->
      <member name="service_instance_tag" type="string" stringMaxLength="64"/>
    </struct>

    <!-- Monitoring and Logging interface -->
    <struct name="LogMessage">
      <member name="log_id" type="string" stringMaxLength="128"/>
      <member name="timestamp" type="int64"/>
      <member name="source_id" type="string" stringMaxLength="128"/>
      <member name="source_name" type="string" stringMaxLength="256"/>
      <member name="level" type="int32"/>
      <member name="level_name" type="string" stringMaxLength="32"/>
      <member name="message" type="string" stringMaxLength="8192"/>
      <member name="logger_name" type="string" stringMaxLength="256"/>
      <member name="thread_id" type="string" stringMaxLength="128"/>
      <member name="thread_name" type="string" stringMaxLength="256"/>
      <member name="file_name" type="string" stringMaxLength="256"/>
      <member name="line_number" type="int32"/>
      <member name="function_name" type="string" stringMaxLength="256"/>
    </struct>

    <!-- Unified Advertisement Model (durable discovery channel) - replaces legacy FunctionCapability and AgentCapability -->
    <enum name="AdvertisementKind">
      <enumerator name="FUNCTION"/>
      <enumerator name="AGENT"/>
      <enumerator name="REGISTRATION"/>
    </enum>

    <struct name="GenesisAdvertisement">
      <member name="advertisement_id" type="string" key="true" stringMaxLength="128"/>
      <member name="kind" type="nonBasic" nonBasicTypeName="AdvertisementKind"/>
      <member name="name" type="string" stringMaxLength="256"/>
      <member name="description" type="string" stringMaxLength="2048"/>
      <member name="service_name" type="string" stringMaxLength="256"/>
      <member name="provider_id" type="string" stringMaxLength="128"/>
      <member name="last_seen" type="int64"/>
      <member name="payload" type="string" stringMaxLength="8192"/>
    </struct>

    <!-- Function Execution Request/Reply -->
    <struct name="FunctionExecutionRequest">
      <member name="request_id" type="string" stringMaxLength="128"/>
      <member name="function_id" type="string" stringMaxLength="128"/>
      <member name="parameters" type="string" stringMaxLength="8192"/>
      <member name="timestamp" type="int64"/>
      <member name="metadata" type="string" stringMaxLength="2048"/>
    </struct>

    <struct name="FunctionExecutionReply">
      <member name="request_id" type="string" stringMaxLength="128"/>
      <member name="function_id" type="string" stringMaxLength="128"/>
      <member name="result" type="string" stringMaxLength="8192"/>
      <member name="status" type="int32"/>
      <member name="error_message" type="string" stringMaxLength="2048"/>
      <member name="timestamp" type="int64"/>
      <member name="metadata" type="string" stringMaxLength="2048"/>
    </struct>

    <!-- Test service interface -->
    <struct name="TestRequest">
      <member name="message" type="string" stringMaxLength="8192"/>
    </struct>

    <struct name="TestReply">
      <member name="message" type="string" stringMaxLength="8192"/>
      <member name="status" type="int32"/>
    </struct>

    <!-- LLM Function Schema -->
    <struct name="LLMFunctionSchema">
      <member name="function_id" type="string" key="true" stringMaxLength="128"/>
      <member name="name" type="string" stringMaxLength="256"/>
      <member name="description" type="string" stringMaxLength="2048"/>
      <member name="parameters_schema" type="string" stringMaxLength="8192"/>
      <member name="returns_schema" type="string" stringMaxLength="2048"/>
      <member name="provider_id" type="string" stringMaxLength="128"/>
      <member name="version" type="string" stringMaxLength="64"/>
      <member name="tags" type="string" stringMaxLength="1024"/>
    </struct>

    <!-- Function Monitoring Events -->
    <enum name="EventType">
      <enumerator name="FUNCTION_DISCOVERY"/>
      <enumerator name="FUNCTION_CALL"/>
      <enumerator name="FUNCTION_RESULT"/>
      <enumerator name="FUNCTION_STATUS"/>
      <enumerator name="FUNCTION_DISCOVERY_V2"/>
      <enumerator name="AGENT_TO_AGENT_REQUEST"/>
      <enumerator name="AGENT_TO_AGENT_RESPONSE"/>
      <enumerator name="AGENT_CONNECTION_ESTABLISHED"/>
      <enumerator name="AGENT_CONNECTION_LOST"/>
    </enum>

    <enum name="EntityType">
      <enumerator name="FUNCTION"/>
      <enumerator name="AGENT"/>
      <enumerator name="SPECIALIZED_AGENT"/>
      <enumerator name="INTERFACE"/>
    </enum>

    <struct name="MonitoringEvent">
      <member name="event_id" type="string" key="true" stringMaxLength="128"/>
      <member name="timestamp" type="int64"/>
      <member name="event_type" type="nonBasic" nonBasicTypeName="EventType"/>
      <member name="entity_type" type="nonBasic" nonBasicTypeName="EntityType"/>
      <member name="entity_id" type="string" stringMaxLength="128"/>
      <member name="metadata" type="string" stringMaxLength="2048"/>
      <member name="call_data" type="string" stringMaxLength="8192"/>
      <member name="result_data" type="string" stringMaxLength="8192"/>
      <member name="status_data" type="string" stringMaxLength="2048"/>
    </struct>

    <!-- New Enhanced Monitoring Types -->
    <enum name="ComponentType">
      <enumerator name="INTERFACE"/>
      <enumerator name="PRIMARY_AGENT"/>
      <enumerator name="SPECIALIZED_AGENT"/>
      <enumerator name="FUNCTION"/>
      <enumerator name="SERVICE"/>
    </enum>

    <enum name="ComponentState">
      <enumerator name="JOINING"/>
      <enumerator name="DISCOVERING"/>
      <enumerator name="READY"/>
      <enumerator name="BUSY"/>
      <enumerator name="DEGRADED"/>
      <enumerator name="OFFLINE"/>
    </enum>

    <enum name="EventCategory">
      <enumerator name="NODE_DISCOVERY"/>      <!-- Node/Agent/Component discovery -->
      <enumerator name="EDGE_DISCOVERY"/>      <!-- Connection/Relationship discovery -->
      <enumerator name="STATE_CHANGE"/>        <!-- Component state transitions -->
      <enumerator name="AGENT_INIT"/>          <!-- Agent initialization -->
      <enumerator name="AGENT_READY"/>         <!-- Agent ready state -->
      <enumerator name="AGENT_SHUTDOWN"/>      <!-- Agent shutdown -->
      <enumerator name="DDS_ENDPOINT"/>        <!-- DDS endpoint discovery -->
    </enum>

    <struct name="ComponentLifecycleEvent">
      <member name="component_id" type="string" key="true" stringMaxLength="128"/>
      <member name="component_type" type="nonBasic" nonBasicTypeName="ComponentType"/>
      <member name="previous_state" type="nonBasic" nonBasicTypeName="ComponentState"/>
      <member name="new_state" type="nonBasic" nonBasicTypeName="ComponentState"/>
      <member name="timestamp" type="int64"/>
      <member name="reason" type="string" stringMaxLength="1024"/>
      <member name="capabilities" type="string" stringMaxLength="2048"/>
      <member name="chain_id" type="string" stringMaxLength="128"/>
      <member name="call_id" type="string" stringMaxLength="128"/>
      <member name="event_category" type="nonBasic" nonBasicTypeName="EventCategory"/>
      <member name="source_id" type="string" stringMaxLength="128"/>
      <member name="target_id" type="string" stringMaxLength="128"/>
      <member name="connection_type" type="string" stringMaxLength="128"/>
    </struct>

    <struct name="ChainEvent">
      <member name="chain_id" type="string" key="true" stringMaxLength="128"/>
      <member name="call_id" type="string" stringMaxLength="128"/>
      <member name="interface_id" type="string" stringMaxLength="128"/>
      <member name="primary_agent_id" type="string" stringMaxLength="128"/>
      <member name="specialized_agent_ids" type="string" stringMaxLength="2048"/>
      <member name="function_id" type="string" stringMaxLength="128"/>
      <member name="query_id" type="string" stringMaxLength="128"/>
      <member name="timestamp" type="int64"/>
      <member name="event_type" type="string" stringMaxLength="128"/>
      <member name="source_id" type="string" stringMaxLength="128"/>
      <member name="target_id" type="string" stringMaxLength="128"/>
      <member name="status" type="int32"/>
    </struct>

    <!-- Durable graph topology types (nodes and edges) -->
    <struct name="GenesisGraphNode">
      <member name="node_id" type="string" key="true" stringMaxLength="128"/>
      <member name="node_type" type="string" stringMaxLength="32"/>
      <member name="node_state" type="string" stringMaxLength="32"/>
      <member name="node_name" type="string" stringMaxLength="256"/>
      <member name="metadata" type="string" stringMaxLength="8192"/>
      <member name="timestamp" type="int64"/>
    </struct>

    <struct name="GenesisGraphEdge">
      <member name="source_id" type="string" key="true" stringMaxLength="128"/>
      <member name="target_id" type="string" key="true" stringMaxLength="128"/>
      <member name="edge_type" type="string" key="true" stringMaxLength="64"/>
      <member name="metadata" type="string" stringMaxLength="4096"/>
      <member name="timestamp" type="int64"/>
    </struct>

    <struct name="LivelinessUpdate">
      <member name="component_id" type="string" key="true" stringMaxLength="128"/>
      <member name="component_type" type="nonBasic" nonBasicTypeName="ComponentType"/>
      <member name="state" type="nonBasic" nonBasicTypeName="ComponentState"/>
      <member name="last_active" type="int64"/>
      <member name="health_metrics" type="string" stringMaxLength="1024"/>
    </struct>

    <!-- ========================================= -->
    <!-- UNIFIED MONITORING TYPES (Phase 1)        -->
    <!-- Consolidates 5 topics â†’ 2 topics          -->
    <!-- ========================================= -->

    <!-- Graph Topology (Durable) - Consolidates GenesisGraphNode + GenesisGraphEdge -->
    <enum name="GraphElementKind">
      <enumerator name="NODE" value="0"/>
      <enumerator name="EDGE" value="1"/>
    </enum>

    <struct name="GraphTopology">
      <member name="element_id" type="string" key="true" stringMaxLength="256"/>
      <member name="kind" type="nonBasic" nonBasicTypeName="GraphElementKind"/>
      <member name="timestamp" type="int64"/>
      <member name="component_name" type="string" stringMaxLength="256"/>
      <member name="component_type" type="string" stringMaxLength="128"/>
      <member name="state" type="string" stringMaxLength="64"/>
      <!-- JSON payload for extensibility -->
      <!-- NODE: metadata contains node_type, node_state, capabilities -->
      <!-- EDGE: metadata contains source_id, target_id, edge_type -->
      <member name="metadata" type="string" stringMaxLength="8192"/>
    </struct>

    <!-- Monitoring Event (Volatile) - Consolidates ChainEvent + ComponentLifecycleEvent + MonitoringEvent -->
    <enum name="EventKind">
      <enumerator name="CHAIN" value="0"/>
      <enumerator name="LIFECYCLE" value="1"/>
      <enumerator name="GENERAL" value="2"/>
    </enum>

    <struct name="MonitoringEventUnified">
      <member name="event_id" type="string" stringMaxLength="128"/>
      <member name="kind" type="nonBasic" nonBasicTypeName="EventKind"/>
      <member name="timestamp" type="int64"/>
      <member name="component_id" type="string" stringMaxLength="256"/>
      <member name="severity" type="string" stringMaxLength="32"/>
      <member name="message" type="string" stringMaxLength="2048"/>
      <!-- JSON payload for event-specific data -->
      <!-- CHAIN: chain_id, hop_number, latency, source_id, target_id, status -->
      <!-- LIFECYCLE: previous_state, new_state, reason, capabilities -->
      <!-- GENERAL: arbitrary event data -->
      <member name="payload" type="string" stringMaxLength="8192"/>
    </struct>

  </type_library>

</dds>
